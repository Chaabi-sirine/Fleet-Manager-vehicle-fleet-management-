<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>ðŸš„ Tableau de Bord SNCFT</h1>
    <p>Vue d'ensemble et statistiques en temps rÃ©el</p>
    <div class="header-actions">
      <app-button variant="ghost" icon="ðŸ”„" size="sm">Actualiser</app-button>
      <app-button variant="primary" icon="ðŸ“Š" size="sm">Rapport</app-button>
    </div>
  </div>

  <!-- Statistiques principales -->
  <div class="stats-grid">
    <app-stat-card
      title="VÃ©hicules"
      subtitle="Total actifs"
      [value]="totalVehicles"
      icon="ðŸš—"
      variant="primary"
      [trend]="{ type: 'up', value: 5.2 }"
      footerText="DerniÃ¨re mise Ã  jour il y a 5 min"
      [progress]="85">
    </app-stat-card>

    <app-stat-card
      title="Missions"
      subtitle="En cours aujourd'hui"
      [value]="activeMissions"
      icon="ðŸ“‹"
      variant="secondary"
      [trend]="{ type: 'up', value: 12.5 }"
      footerText="3 nouvelles missions"
      [progress]="65">
    </app-stat-card>

    <app-stat-card
      title="Carburant"
      subtitle="Consommation ce mois"
      [value]="fuelConsumption"
      unit="L"
      icon="â›½"
      variant="success"
      [trend]="{ type: 'down', value: 8.3 }"
      footerText="Ã‰conomie de 200L vs mois dernier"
      [progress]="45">
    </app-stat-card>

    <app-stat-card
      title="Utilisateurs"
      subtitle="Personnel actif"
      [value]="totalUsers"
      icon="ðŸ‘¥"
      variant="info"
      [trend]="{ type: 'neutral', value: 0 }"
      footerText="28 connectÃ©s aujourd'hui"
      [progress]="92">
    </app-stat-card>
  </div>

  <!-- Graphiques et tableaux -->
  <div class="dashboard-content">
    <div class="content-row">
      <!-- Missions rÃ©centes -->
      <app-card
        title="ðŸš€ Missions RÃ©centes"
        subtitle="ActivitÃ© du jour"
        icon="ðŸ“‹">
        
        <div slot="actions">
          <app-button variant="ghost" size="sm" icon="ðŸ”„" [iconOnly]="true"></app-button>
          <app-button variant="outline" size="sm" [routerLink]="['/missions']">Voir tout â†’</app-button>
        </div>

        <div class="missions-list">
          <div class="mission-item modern" *ngFor="let mission of recentMissions">
            <div class="mission-icon">
              <span class="status-dot" [class]="'dot-' + mission.status"></span>
            </div>
            <div class="mission-info">
              <div class="mission-title">{{mission.title}}</div>
              <div class="mission-date">{{mission.date | date:'short':'fr'}}</div>
            </div>
            <div class="mission-status" [class]="'status-' + mission.status">
              {{getMissionStatusLabel(mission.status)}}
            </div>
          </div>
        </div>
      </app-card>

      <!-- VÃ©hicules en maintenance -->
      <app-card
        title="ðŸ”§ Maintenance"
        subtitle="VÃ©hicules en intervention"
        icon="ðŸš—">
        
        <div slot="actions">
          <app-button variant="ghost" size="sm" icon="âž•" [iconOnly]="true"></app-button>
          <app-button variant="outline" size="sm" [routerLink]="['/vehicles']">Voir tout â†’</app-button>
        </div>

        <div class="vehicles-list">
          <div class="vehicle-item modern" *ngFor="let vehicle of maintenanceVehicles">
            <div class="vehicle-avatar">
              {{getVehicleEmoji(vehicle.name)}}
            </div>
            <div class="vehicle-info">
              <div class="vehicle-name">{{vehicle.name}}</div>
              <div class="vehicle-plate">{{vehicle.plateNumber}}</div>
            </div>
            <div class="maintenance-type">
              <span class="maintenance-badge">{{vehicle.maintenanceType}}</span>
            </div>
          </div>
        </div>
      </app-card>
    </div>

    <!-- Section Performance et Analytics -->
    <div class="content-row">
      <app-card
        title="ðŸ“Š Performance Mensuelle"
        subtitle="Analyse des KPIs"
        icon="ðŸ“ˆ">
        
        <div slot="actions">
          <app-button variant="ghost" size="sm" icon="ðŸ“…" [iconOnly]="true"></app-button>
          <app-button variant="outline" size="sm">DÃ©tails â†’</app-button>
        </div>

        <div class="performance-metrics">
          <div class="metric-row">
            <div class="metric">
              <div class="metric-label">EfficacitÃ© flotte</div>
              <div class="metric-value">92%</div>
              <div class="metric-progress">
                <div class="progress-bar" style="width: 92%"></div>
              </div>
            </div>
            <div class="metric">
              <div class="metric-label">PonctualitÃ©</div>
              <div class="metric-value">87%</div>
              <div class="metric-progress">
                <div class="progress-bar secondary" style="width: 87%"></div>
              </div>
            </div>
          </div>
          <div class="metric-row">
            <div class="metric">
              <div class="metric-label">Satisfaction client</div>
              <div class="metric-value">94%</div>
              <div class="metric-progress">
                <div class="progress-bar success" style="width: 94%"></div>
              </div>
            </div>
            <div class="metric">
              <div class="metric-label">Ã‰conomie carburant</div>
              <div class="metric-value">78%</div>
              <div class="metric-progress">
                <div class="progress-bar warning" style="width: 78%"></div>
              </div>
            </div>
          </div>
        </div>
      </app-card>

      <!-- Quick Actions -->
      <app-card
        title="âš¡ Actions Rapides"
        subtitle="Raccourcis frÃ©quents"
        icon="ðŸŽ¯">

        <div class="quick-actions-grid">
          <app-button variant="primary" icon="ðŸš—" [fullWidth]="true" [routerLink]="['/vehicles']">
            Nouveau vÃ©hicule
          </app-button>
          <app-button variant="secondary" icon="ðŸ“‹" [fullWidth]="true" [routerLink]="['/missions']">
            CrÃ©er mission
          </app-button>
          <app-button variant="outline" icon="â›½" [fullWidth]="true" [routerLink]="['/fuel']">
            Gestion carburant
          </app-button>
          <app-button variant="ghost" icon="ðŸ“Š" [fullWidth]="true" [routerLink]="['/reports']">
            GÃ©nÃ©rer rapport
          </app-button>
        </div>

        <div slot="footer">
          <div class="footer-actions">
            <span class="footer-info">ðŸ’¡ Astuce: Utilisez Ctrl+N pour une nouvelle mission</span>
          </div>
        </div>
      </app-card>
    </div>
  </div>
</div>
